<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>bower_components/es5-shim/es5-shim.js - yocto-core-stack</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="yocto-core-stack" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ConfController.html">ConfController</a></li>
                                <li><a href="../classes/Gruntfile.html">Gruntfile</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/copy.html">copy</a></li>
                                <li><a href="../modules/Grunt file.html">Grunt file</a></li>
                                <li><a href="../modules/jshint.html">jshint</a></li>
                                <li><a href="../modules/ng.html">ng</a></li>
                                <li><a href="../modules/ngMessages.html">ngMessages</a></li>
                                <li><a href="../modules/ngMock.html">ngMock</a></li>
                                <li><a href="../modules/ngMockE2E.html">ngMockE2E</a></li>
                                <li><a href="../modules/uglify.html">uglify</a></li>
                                <li><a href="../modules/yuidoc.html">yuidoc</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: bower_components/es5-shim/es5-shim.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */

// vim: ts=4 sts=4 sw=4 expandtab

// Add semicolon to prevent IIFE from being passed as argument to concatenated code.
;

// UMD (Universal Module Definition)
// see https://github.com/umdjs/umd/blob/master/returnExports.js
(function (root, factory) {
    &#x27;use strict&#x27;;
    /*global define, exports, module */
    if (typeof define === &#x27;function&#x27; &amp;&amp; define.amd) {
        // AMD. Register as an anonymous module.
        define(factory);
    } else if (typeof exports === &#x27;object&#x27;) {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like enviroments that support module.exports,
        // like Node.
        module.exports = factory();
    } else {
        // Browser globals (root is window)
        root.returnExports = factory();
    }
}(this, function () {

/**
 * Brings an environment as close to ECMAScript 5 compliance
 * as is possible with the facilities of erstwhile engines.
 *
 * Annotated ES5: http://es5.github.com/ (specific links below)
 * ES5 Spec: http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf
 * Required reading: http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/
 */

// Shortcut to an often accessed properties, in order to avoid multiple
// dereference that costs universally.
var ArrayPrototype = Array.prototype;
var ObjectPrototype = Object.prototype;
var FunctionPrototype = Function.prototype;
var StringPrototype = String.prototype;
var NumberPrototype = Number.prototype;
var array_slice = ArrayPrototype.slice;
var array_splice = ArrayPrototype.splice;
var array_push = ArrayPrototype.push;
var array_unshift = ArrayPrototype.unshift;
var call = FunctionPrototype.call;

// Having a toString local variable name breaks in Opera so use to_string.
var to_string = ObjectPrototype.toString;

var isArray = Array.isArray || function isArray(obj) {
    return to_string.call(obj) === &#x27;[object Array]&#x27;;
};

var hasToStringTag = typeof Symbol === &#x27;function&#x27; &amp;&amp; typeof Symbol.toStringTag === &#x27;symbol&#x27;;
var isCallable; /* inlined from https://npmjs.com/is-callable */ var fnToStr = Function.prototype.toString, tryFunctionObject = function tryFunctionObject(value) { try { fnToStr.call(value); return true; } catch (e) { return false; } }, fnClass = &#x27;[object Function]&#x27;, genClass = &#x27;[object GeneratorFunction]&#x27;; isCallable = function isCallable(value) { if (typeof value !== &#x27;function&#x27;) { return false; } if (hasToStringTag) { return tryFunctionObject(value); } var strClass = to_string.call(value); return strClass === fnClass || strClass === genClass; };
var isRegex; /* inlined from https://npmjs.com/is-regex */ var regexExec = RegExp.prototype.exec, tryRegexExec = function tryRegexExec(value) { try { regexExec.call(value); return true; } catch (e) { return false; } }, regexClass = &#x27;[object RegExp]&#x27;; isRegex = function isRegex(value) { if (typeof value !== &#x27;object&#x27;) { return false; } return hasToStringTag ? tryRegexExec(value) : to_string.call(value) === regexClass; };
var isString; /* inlined from https://npmjs.com/is-string */ var strValue = String.prototype.valueOf, tryStringObject = function tryStringObject(value) { try { strValue.call(value); return true; } catch (e) { return false; } }, stringClass = &#x27;[object String]&#x27;; isString = function isString(value) { if (typeof value === &#x27;string&#x27;) { return true; } if (typeof value !== &#x27;object&#x27;) { return false; } return hasToStringTag ? tryStringObject(value) : to_string.call(value) === stringClass; };

var isArguments = function isArguments(value) {
    var str = to_string.call(value);
    var isArgs = str === &#x27;[object Arguments]&#x27;;
    if (!isArgs) {
        isArgs = !isArray(value) &amp;&amp;
          value !== null &amp;&amp;
          typeof value === &#x27;object&#x27; &amp;&amp;
          typeof value.length === &#x27;number&#x27; &amp;&amp;
          value.length &gt;= 0 &amp;&amp;
          isCallable(value.callee);
    }
    return isArgs;
};

/* inlined from http://npmjs.com/define-properties */
var defineProperties = (function (has) {
  var supportsDescriptors = Object.defineProperty &amp;&amp; (function () {
      try {
          Object.defineProperty({}, &#x27;x&#x27;, {});
          return true;
      } catch (e) { /* this is ES3 */
          return false;
      }
  }());

  // Define configurable, writable and non-enumerable props
  // if they don&#x27;t exist.
  var defineProperty;
  if (supportsDescriptors) {
      defineProperty = function (object, name, method, forceAssign) {
          if (!forceAssign &amp;&amp; (name in object)) { return; }
          Object.defineProperty(object, name, {
              configurable: true,
              enumerable: false,
              writable: true,
              value: method
          });
      };
  } else {
      defineProperty = function (object, name, method, forceAssign) {
          if (!forceAssign &amp;&amp; (name in object)) { return; }
          object[name] = method;
      };
  }
  return function defineProperties(object, map, forceAssign) {
      for (var name in map) {
          if (has.call(map, name)) {
            defineProperty(object, name, map[name], forceAssign);
          }
      }
  };
}(ObjectPrototype.hasOwnProperty));

//
// Util
// ======
//

/* replaceable with https://npmjs.com/package/es-abstract /helpers/isPrimitive */
function isPrimitive(input) {
    var type = typeof input;
    return input === null ||
        type === &#x27;undefined&#x27; ||
        type === &#x27;boolean&#x27; ||
        type === &#x27;number&#x27; ||
        type === &#x27;string&#x27;;
}

var ES = {
    // ES5 9.4
    // http://es5.github.com/#x9.4
    // http://jsperf.com/to-integer
    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToInteger */
    ToInteger: function ToInteger(num) {
        var n = +num;
        if (n !== n) { // isNaN
            n = 0;
        } else if (n !== 0 &amp;&amp; n !== (1 / 0) &amp;&amp; n !== -(1 / 0)) {
            n = (n &gt; 0 || -1) * Math.floor(Math.abs(n));
        }
        return n;
    },

    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToPrimitive */
    ToPrimitive: function ToPrimitive(input) {
        var val, valueOf, toStr;
        if (isPrimitive(input)) {
            return input;
        }
        valueOf = input.valueOf;
        if (isCallable(valueOf)) {
            val = valueOf.call(input);
            if (isPrimitive(val)) {
                return val;
            }
        }
        toStr = input.toString;
        if (isCallable(toStr)) {
            val = toStr.call(input);
            if (isPrimitive(val)) {
                return val;
            }
        }
        throw new TypeError();
    },

    // ES5 9.9
    // http://es5.github.com/#x9.9
    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToObject */
    ToObject: function (o) {
        /*jshint eqnull: true */
        if (o == null) { // this matches both null and undefined
            throw new TypeError(&quot;can&#x27;t convert &quot; + o + &#x27; to object&#x27;);
        }
        return Object(o);
    },

    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToUint32 */
    ToUint32: function ToUint32(x) {
        return x &gt;&gt;&gt; 0;
    }
};

//
// Function
// ========
//

// ES-5 15.3.4.5
// http://es5.github.com/#x15.3.4.5

var Empty = function Empty() {};

defineProperties(FunctionPrototype, {
    bind: function bind(that) { // .length is 1
        // 1. Let Target be the this value.
        var target = this;
        // 2. If IsCallable(Target) is false, throw a TypeError exception.
        if (!isCallable(target)) {
            throw new TypeError(&#x27;Function.prototype.bind called on incompatible &#x27; + target);
        }
        // 3. Let A be a new (possibly empty) internal list of all of the
        //   argument values provided after thisArg (arg1, arg2 etc), in order.
        // XXX slicedArgs will stand in for &quot;A&quot; if used
        var args = array_slice.call(arguments, 1); // for normal call
        // 4. Let F be a new native ECMAScript object.
        // 11. Set the [[Prototype]] internal property of F to the standard
        //   built-in Function prototype object as specified in 15.3.3.1.
        // 12. Set the [[Call]] internal property of F as described in
        //   15.3.4.5.1.
        // 13. Set the [[Construct]] internal property of F as described in
        //   15.3.4.5.2.
        // 14. Set the [[HasInstance]] internal property of F as described in
        //   15.3.4.5.3.
        var bound;
        var binder = function () {

            if (this instanceof bound) {
                // 15.3.4.5.2 [[Construct]]
                // When the [[Construct]] internal method of a function object,
                // F that was created using the bind function is called with a
                // list of arguments ExtraArgs, the following steps are taken:
                // 1. Let target be the value of F&#x27;s [[TargetFunction]]
                //   internal property.
                // 2. If target has no [[Construct]] internal method, a
                //   TypeError exception is thrown.
                // 3. Let boundArgs be the value of F&#x27;s [[BoundArgs]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Construct]] internal
                //   method of target providing args as the arguments.

                var result = target.apply(
                    this,
                    args.concat(array_slice.call(arguments))
                );
                if (Object(result) === result) {
                    return result;
                }
                return this;

            } else {
                // 15.3.4.5.1 [[Call]]
                // When the [[Call]] internal method of a function object, F,
                // which was created using the bind function is called with a
                // this value and a list of arguments ExtraArgs, the following
                // steps are taken:
                // 1. Let boundArgs be the value of F&#x27;s [[BoundArgs]] internal
                //   property.
                // 2. Let boundThis be the value of F&#x27;s [[BoundThis]] internal
                //   property.
                // 3. Let target be the value of F&#x27;s [[TargetFunction]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Call]] internal method
                //   of target providing boundThis as the this value and
                //   providing args as the arguments.

                // equiv: target.call(this, ...boundArgs, ...args)
                return target.apply(
                    that,
                    args.concat(array_slice.call(arguments))
                );

            }

        };

        // 15. If the [[Class]] internal property of Target is &quot;Function&quot;, then
        //     a. Let L be the length property of Target minus the length of A.
        //     b. Set the length own property of F to either 0 or L, whichever is
        //       larger.
        // 16. Else set the length own property of F to 0.

        var boundLength = Math.max(0, target.length - args.length);

        // 17. Set the attributes of the length own property of F to the values
        //   specified in 15.3.5.1.
        var boundArgs = [];
        for (var i = 0; i &lt; boundLength; i++) {
            boundArgs.push(&#x27;$&#x27; + i);
        }

        // XXX Build a dynamic function with desired amount of arguments is the only
        // way to set the length property of a function.
        // In environments where Content Security Policies enabled (Chrome extensions,
        // for ex.) all use of eval or Function costructor throws an exception.
        // However in all of these environments Function.prototype.bind exists
        // and so this code will never be executed.
        bound = Function(&#x27;binder&#x27;, &#x27;return function (&#x27; + boundArgs.join(&#x27;,&#x27;) + &#x27;){ return binder.apply(this, arguments); }&#x27;)(binder);

        if (target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            // Clean up dangling references.
            Empty.prototype = null;
        }

        // TODO
        // 18. Set the [[Extensible]] internal property of F to true.

        // TODO
        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).
        // 20. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments &quot;caller&quot;, PropertyDescriptor {[[Get]]: thrower, [[Set]]:
        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and
        //   false.
        // 21. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments &quot;arguments&quot;, PropertyDescriptor {[[Get]]: thrower,
        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},
        //   and false.

        // TODO
        // NOTE Function objects created using Function.prototype.bind do not
        // have a prototype property or the [[Code]], [[FormalParameters]], and
        // [[Scope]] internal properties.
        // XXX can&#x27;t delete prototype in pure-js.

        // 22. Return F.
        return bound;
    }
});

// _Please note: Shortcuts are defined after &#x60;Function.prototype.bind&#x60; as we
// us it in defining shortcuts.
var owns = call.bind(ObjectPrototype.hasOwnProperty);

//
// Array
// =====
//

// ES5 15.4.4.12
// http://es5.github.com/#x15.4.4.12
var spliceNoopReturnsEmptyArray = (function () {
    var a = [1, 2];
    var result = a.splice();
    return a.length === 2 &amp;&amp; isArray(result) &amp;&amp; result.length === 0;
}());
defineProperties(ArrayPrototype, {
    // Safari 5.0 bug where .splice() returns undefined
    splice: function splice(start, deleteCount) {
        if (arguments.length === 0) {
            return [];
        } else {
            return array_splice.apply(this, arguments);
        }
    }
}, !spliceNoopReturnsEmptyArray);

var spliceWorksWithEmptyObject = (function () {
    var obj = {};
    ArrayPrototype.splice.call(obj, 0, 0, 1);
    return obj.length === 1;
}());
defineProperties(ArrayPrototype, {
    splice: function splice(start, deleteCount) {
        if (arguments.length === 0) { return []; }
        var args = arguments;
        this.length = Math.max(ES.ToInteger(this.length), 0);
        if (arguments.length &gt; 0 &amp;&amp; typeof deleteCount !== &#x27;number&#x27;) {
            args = array_slice.call(arguments);
            if (args.length &lt; 2) {
                args.push(this.length - start);
            } else {
                args[1] = ES.ToInteger(deleteCount);
            }
        }
        return array_splice.apply(this, args);
    }
}, !spliceWorksWithEmptyObject);

// ES5 15.4.4.12
// http://es5.github.com/#x15.4.4.13
// Return len+argCount.
// [bugfix, ielt8]
// IE &lt; 8 bug: [].unshift(0) === undefined but should be &quot;1&quot;
var hasUnshiftReturnValueBug = [].unshift(0) !== 1;
defineProperties(ArrayPrototype, {
    unshift: function () {
        array_unshift.apply(this, arguments);
        return this.length;
    }
}, hasUnshiftReturnValueBug);

// ES5 15.4.3.2
// http://es5.github.com/#x15.4.3.2
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray
defineProperties(Array, { isArray: isArray });

// The IsCallable() check in the Array functions
// has been replaced with a strict check on the
// internal class of the object to trap cases where
// the provided function was actually a regular
// expression literal, which in V8 and
// JavaScriptCore is a typeof &quot;function&quot;.  Only in
// V8 are regular expression literals permitted as
// reduce parameters, so it is desirable in the
// general case for the shim to match the more
// strict and common behavior of rejecting regular
// expressions.

// ES5 15.4.4.18
// http://es5.github.com/#x15.4.4.18
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/forEach

// Check failure of by-index access of string characters (IE &lt; 9)
// and failure of &#x60;0 in boxedString&#x60; (Rhino)
var boxedString = Object(&#x27;a&#x27;);
var splitString = boxedString[0] !== &#x27;a&#x27; || !(0 in boxedString);

var properlyBoxesContext = function properlyBoxed(method) {
    // Check node 0.6.21 bug where third parameter is not boxed
    var properlyBoxesNonStrict = true;
    var properlyBoxesStrict = true;
    if (method) {
        method.call(&#x27;foo&#x27;, function (_, __, context) {
            if (typeof context !== &#x27;object&#x27;) { properlyBoxesNonStrict = false; }
        });

        method.call([1], function () {
            &#x27;use strict&#x27;;
            properlyBoxesStrict = typeof this === &#x27;string&#x27;;
        }, &#x27;x&#x27;);
    }
    return !!method &amp;&amp; properlyBoxesNonStrict &amp;&amp; properlyBoxesStrict;
};

defineProperties(ArrayPrototype, {
    forEach: function forEach(fun /*, thisp*/) {
        var object = ES.ToObject(this),
            self = splitString &amp;&amp; isString(this) ? this.split(&#x27;&#x27;) : object,
            thisp = arguments[1],
            i = -1,
            length = self.length &gt;&gt;&gt; 0;

        // If no callback function or if callback is not a callable function
        if (!isCallable(fun)) {
            throw new TypeError(); // TODO message
        }

        while (++i &lt; length) {
            if (i in self) {
                // Invoke the callback function with call, passing arguments:
                // context, property value, property key, thisArg object
                // context
                fun.call(thisp, self[i], i, object);
            }
        }
    }
}, !properlyBoxesContext(ArrayPrototype.forEach));

// ES5 15.4.4.19
// http://es5.github.com/#x15.4.4.19
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map
defineProperties(ArrayPrototype, {
    map: function map(fun /*, thisp*/) {
        var object = ES.ToObject(this),
            self = splitString &amp;&amp; isString(this) ? this.split(&#x27;&#x27;) : object,
            length = self.length &gt;&gt;&gt; 0,
            result = Array(length),
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (!isCallable(fun)) {
            throw new TypeError(fun + &#x27; is not a function&#x27;);
        }

        for (var i = 0; i &lt; length; i++) {
            if (i in self) {
                result[i] = fun.call(thisp, self[i], i, object);
            }
        }
        return result;
    }
}, !properlyBoxesContext(ArrayPrototype.map));

// ES5 15.4.4.20
// http://es5.github.com/#x15.4.4.20
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/filter
defineProperties(ArrayPrototype, {
    filter: function filter(fun /*, thisp */) {
        var object = ES.ToObject(this),
            self = splitString &amp;&amp; isString(this) ? this.split(&#x27;&#x27;) : object,
            length = self.length &gt;&gt;&gt; 0,
            result = [],
            value,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (!isCallable(fun)) {
            throw new TypeError(fun + &#x27; is not a function&#x27;);
        }

        for (var i = 0; i &lt; length; i++) {
            if (i in self) {
                value = self[i];
                if (fun.call(thisp, value, i, object)) {
                    result.push(value);
                }
            }
        }
        return result;
    }
}, !properlyBoxesContext(ArrayPrototype.filter));

// ES5 15.4.4.16
// http://es5.github.com/#x15.4.4.16
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every
defineProperties(ArrayPrototype, {
    every: function every(fun /*, thisp */) {
        var object = ES.ToObject(this),
            self = splitString &amp;&amp; isString(this) ? this.split(&#x27;&#x27;) : object,
            length = self.length &gt;&gt;&gt; 0,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (!isCallable(fun)) {
            throw new TypeError(fun + &#x27; is not a function&#x27;);
        }

        for (var i = 0; i &lt; length; i++) {
            if (i in self &amp;&amp; !fun.call(thisp, self[i], i, object)) {
                return false;
            }
        }
        return true;
    }
}, !properlyBoxesContext(ArrayPrototype.every));

// ES5 15.4.4.17
// http://es5.github.com/#x15.4.4.17
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some
defineProperties(ArrayPrototype, {
    some: function some(fun /*, thisp */) {
        var object = ES.ToObject(this),
            self = splitString &amp;&amp; isString(this) ? this.split(&#x27;&#x27;) : object,
            length = self.length &gt;&gt;&gt; 0,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (!isCallable(fun)) {
            throw new TypeError(fun + &#x27; is not a function&#x27;);
        }

        for (var i = 0; i &lt; length; i++) {
            if (i in self &amp;&amp; fun.call(thisp, self[i], i, object)) {
                return true;
            }
        }
        return false;
    }
}, !properlyBoxesContext(ArrayPrototype.some));

// ES5 15.4.4.21
// http://es5.github.com/#x15.4.4.21
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduce
var reduceCoercesToObject = false;
if (ArrayPrototype.reduce) {
    reduceCoercesToObject = typeof ArrayPrototype.reduce.call(&#x27;es5&#x27;, function (_, __, ___, list) { return list; }) === &#x27;object&#x27;;
}
defineProperties(ArrayPrototype, {
    reduce: function reduce(fun /*, initial*/) {
        var object = ES.ToObject(this),
            self = splitString &amp;&amp; isString(this) ? this.split(&#x27;&#x27;) : object,
            length = self.length &gt;&gt;&gt; 0;

        // If no callback function or if callback is not a callable function
        if (!isCallable(fun)) {
            throw new TypeError(fun + &#x27; is not a function&#x27;);
        }

        // no value to return if no initial value and an empty array
        if (!length &amp;&amp; arguments.length === 1) {
            throw new TypeError(&#x27;reduce of empty array with no initial value&#x27;);
        }

        var i = 0;
        var result;
        if (arguments.length &gt;= 2) {
            result = arguments[1];
        } else {
            do {
                if (i in self) {
                    result = self[i++];
                    break;
                }

                // if array contains no values, no initial value to return
                if (++i &gt;= length) {
                    throw new TypeError(&#x27;reduce of empty array with no initial value&#x27;);
                }
            } while (true);
        }

        for (; i &lt; length; i++) {
            if (i in self) {
                result = fun.call(void 0, result, self[i], i, object);
            }
        }

        return result;
    }
}, !reduceCoercesToObject);

// ES5 15.4.4.22
// http://es5.github.com/#x15.4.4.22
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduceRight
var reduceRightCoercesToObject = false;
if (ArrayPrototype.reduceRight) {
    reduceRightCoercesToObject = typeof ArrayPrototype.reduceRight.call(&#x27;es5&#x27;, function (_, __, ___, list) { return list; }) === &#x27;object&#x27;;
}
defineProperties(ArrayPrototype, {
    reduceRight: function reduceRight(fun /*, initial*/) {
        var object = ES.ToObject(this),
            self = splitString &amp;&amp; isString(this) ? this.split(&#x27;&#x27;) : object,
            length = self.length &gt;&gt;&gt; 0;

        // If no callback function or if callback is not a callable function
        if (!isCallable(fun)) {
            throw new TypeError(fun + &#x27; is not a function&#x27;);
        }

        // no value to return if no initial value, empty array
        if (!length &amp;&amp; arguments.length === 1) {
            throw new TypeError(&#x27;reduceRight of empty array with no initial value&#x27;);
        }

        var result, i = length - 1;
        if (arguments.length &gt;= 2) {
            result = arguments[1];
        } else {
            do {
                if (i in self) {
                    result = self[i--];
                    break;
                }

                // if array contains no values, no initial value to return
                if (--i &lt; 0) {
                    throw new TypeError(&#x27;reduceRight of empty array with no initial value&#x27;);
                }
            } while (true);
        }

        if (i &lt; 0) {
            return result;
        }

        do {
            if (i in self) {
                result = fun.call(void 0, result, self[i], i, object);
            }
        } while (i--);

        return result;
    }
}, !reduceRightCoercesToObject);

// ES5 15.4.4.14
// http://es5.github.com/#x15.4.4.14
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf
var hasFirefox2IndexOfBug = Array.prototype.indexOf &amp;&amp; [0, 1].indexOf(1, 2) !== -1;
defineProperties(ArrayPrototype, {
    indexOf: function indexOf(sought /*, fromIndex */) {
        var self = splitString &amp;&amp; isString(this) ? this.split(&#x27;&#x27;) : ES.ToObject(this),
            length = self.length &gt;&gt;&gt; 0;

        if (!length) {
            return -1;
        }

        var i = 0;
        if (arguments.length &gt; 1) {
            i = ES.ToInteger(arguments[1]);
        }

        // handle negative indices
        i = i &gt;= 0 ? i : Math.max(0, length + i);
        for (; i &lt; length; i++) {
            if (i in self &amp;&amp; self[i] === sought) {
                return i;
            }
        }
        return -1;
    }
}, hasFirefox2IndexOfBug);

// ES5 15.4.4.15
// http://es5.github.com/#x15.4.4.15
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf
var hasFirefox2LastIndexOfBug = Array.prototype.lastIndexOf &amp;&amp; [0, 1].lastIndexOf(0, -3) !== -1;
defineProperties(ArrayPrototype, {
    lastIndexOf: function lastIndexOf(sought /*, fromIndex */) {
        var self = splitString &amp;&amp; isString(this) ? this.split(&#x27;&#x27;) : ES.ToObject(this),
            length = self.length &gt;&gt;&gt; 0;

        if (!length) {
            return -1;
        }
        var i = length - 1;
        if (arguments.length &gt; 1) {
            i = Math.min(i, ES.ToInteger(arguments[1]));
        }
        // handle negative indices
        i = i &gt;= 0 ? i : length - Math.abs(i);
        for (; i &gt;= 0; i--) {
            if (i in self &amp;&amp; sought === self[i]) {
                return i;
            }
        }
        return -1;
    }
}, hasFirefox2LastIndexOfBug);

//
// Object
// ======
//

// ES5 15.2.3.14
// http://es5.github.com/#x15.2.3.14

// http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation
var hasDontEnumBug = !({&#x27;toString&#x27;: null}).propertyIsEnumerable(&#x27;toString&#x27;),
    hasProtoEnumBug = function () {}.propertyIsEnumerable(&#x27;prototype&#x27;),
    hasStringEnumBug = !owns(&#x27;x&#x27;, &#x27;0&#x27;),
    dontEnums = [
        &#x27;toString&#x27;,
        &#x27;toLocaleString&#x27;,
        &#x27;valueOf&#x27;,
        &#x27;hasOwnProperty&#x27;,
        &#x27;isPrototypeOf&#x27;,
        &#x27;propertyIsEnumerable&#x27;,
        &#x27;constructor&#x27;
    ],
    dontEnumsLength = dontEnums.length;

defineProperties(Object, {
    keys: function keys(object) {
        var isFn = isCallable(object),
            isArgs = isArguments(object),
            isObject = object !== null &amp;&amp; typeof object === &#x27;object&#x27;,
            isStr = isObject &amp;&amp; isString(object);

        if (!isObject &amp;&amp; !isFn &amp;&amp; !isArgs) {
            throw new TypeError(&#x27;Object.keys called on a non-object&#x27;);
        }

        var theKeys = [];
        var skipProto = hasProtoEnumBug &amp;&amp; isFn;
        if ((isStr &amp;&amp; hasStringEnumBug) || isArgs) {
            for (var i = 0; i &lt; object.length; ++i) {
                theKeys.push(String(i));
            }
        }

        if (!isArgs) {
            for (var name in object) {
                if (!(skipProto &amp;&amp; name === &#x27;prototype&#x27;) &amp;&amp; owns(object, name)) {
                    theKeys.push(String(name));
                }
            }
        }

        if (hasDontEnumBug) {
            var ctor = object.constructor,
                skipConstructor = ctor &amp;&amp; ctor.prototype === object;
            for (var j = 0; j &lt; dontEnumsLength; j++) {
                var dontEnum = dontEnums[j];
                if (!(skipConstructor &amp;&amp; dontEnum === &#x27;constructor&#x27;) &amp;&amp; owns(object, dontEnum)) {
                    theKeys.push(dontEnum);
                }
            }
        }
        return theKeys;
    }
});

var keysWorksWithArguments = Object.keys &amp;&amp; (function () {
    // Safari 5.0 bug
    return Object.keys(arguments).length === 2;
}(1, 2));
var originalKeys = Object.keys;
defineProperties(Object, {
    keys: function keys(object) {
        if (isArguments(object)) {
            return originalKeys(ArrayPrototype.slice.call(object));
        } else {
            return originalKeys(object);
        }
    }
}, !keysWorksWithArguments);

//
// Date
// ====
//

// ES5 15.9.5.43
// http://es5.github.com/#x15.9.5.43
// This function returns a String value represent the instance in time
// represented by this Date object. The format of the String is the Date Time
// string format defined in 15.9.1.15. All fields are present in the String.
// The time zone is always UTC, denoted by the suffix Z. If the time value of
// this object is not a finite Number a RangeError exception is thrown.
var negativeDate = -62198755200000;
var negativeYearString = &#x27;-000001&#x27;;
var hasNegativeDateBug = Date.prototype.toISOString &amp;&amp; new Date(negativeDate).toISOString().indexOf(negativeYearString) === -1;

defineProperties(Date.prototype, {
    toISOString: function toISOString() {
        var result, length, value, year, month;
        if (!isFinite(this)) {
            throw new RangeError(&#x27;Date.prototype.toISOString called on non-finite value.&#x27;);
        }

        year = this.getUTCFullYear();

        month = this.getUTCMonth();
        // see https://github.com/es-shims/es5-shim/issues/111
        year += Math.floor(month / 12);
        month = (month % 12 + 12) % 12;

        // the date time string format is specified in 15.9.1.15.
        result = [month + 1, this.getUTCDate(), this.getUTCHours(), this.getUTCMinutes(), this.getUTCSeconds()];
        year = (
            (year &lt; 0 ? &#x27;-&#x27; : (year &gt; 9999 ? &#x27;+&#x27; : &#x27;&#x27;)) +
            (&#x27;00000&#x27; + Math.abs(year)).slice((0 &lt;= year &amp;&amp; year &lt;= 9999) ? -4 : -6)
        );

        length = result.length;
        while (length--) {
            value = result[length];
            // pad months, days, hours, minutes, and seconds to have two
            // digits.
            if (value &lt; 10) {
                result[length] = &#x27;0&#x27; + value;
            }
        }
        // pad milliseconds to have three digits.
        return (
            year + &#x27;-&#x27; + result.slice(0, 2).join(&#x27;-&#x27;) +
            &#x27;T&#x27; + result.slice(2).join(&#x27;:&#x27;) + &#x27;.&#x27; +
            (&#x27;000&#x27; + this.getUTCMilliseconds()).slice(-3) + &#x27;Z&#x27;
        );
    }
}, hasNegativeDateBug);

// ES5 15.9.5.44
// http://es5.github.com/#x15.9.5.44
// This function provides a String representation of a Date object for use by
// JSON.stringify (15.12.3).
var dateToJSONIsSupported = (function () {
    try {
        return Date.prototype.toJSON &amp;&amp;
            new Date(NaN).toJSON() === null &amp;&amp;
            new Date(negativeDate).toJSON().indexOf(negativeYearString) !== -1 &amp;&amp;
            Date.prototype.toJSON.call({ // generic
                toISOString: function () { return true; }
            });
    } catch (e) {
        return false;
    }
}());
if (!dateToJSONIsSupported) {
    Date.prototype.toJSON = function toJSON(key) {
        // When the toJSON method is called with argument key, the following
        // steps are taken:

        // 1.  Let O be the result of calling ToObject, giving it the this
        // value as its argument.
        // 2. Let tv be ES.ToPrimitive(O, hint Number).
        var O = Object(this);
        var tv = ES.ToPrimitive(O);
        // 3. If tv is a Number and is not finite, return null.
        if (typeof tv === &#x27;number&#x27; &amp;&amp; !isFinite(tv)) {
            return null;
        }
        // 4. Let toISO be the result of calling the [[Get]] internal method of
        // O with argument &quot;toISOString&quot;.
        var toISO = O.toISOString;
        // 5. If IsCallable(toISO) is false, throw a TypeError exception.
        if (!isCallable(toISO)) {
            throw new TypeError(&#x27;toISOString property is not callable&#x27;);
        }
        // 6. Return the result of calling the [[Call]] internal method of
        //  toISO with O as the this value and an empty argument list.
        return toISO.call(O);

        // NOTE 1 The argument is ignored.

        // NOTE 2 The toJSON function is intentionally generic; it does not
        // require that its this value be a Date object. Therefore, it can be
        // transferred to other kinds of objects for use as a method. However,
        // it does require that any such object have a toISOString method. An
        // object is free to use the argument key to filter its
        // stringification.
    };
}

// ES5 15.9.4.2
// http://es5.github.com/#x15.9.4.2
// based on work shared by Daniel Friesen (dantman)
// http://gist.github.com/303249
var supportsExtendedYears = Date.parse(&#x27;+033658-09-27T01:46:40.000Z&#x27;) === 1e15;
var acceptsInvalidDates = !isNaN(Date.parse(&#x27;2012-04-04T24:00:00.500Z&#x27;)) || !isNaN(Date.parse(&#x27;2012-11-31T23:59:59.000Z&#x27;));
var doesNotParseY2KNewYear = isNaN(Date.parse(&#x27;2000-01-01T00:00:00.000Z&#x27;));
if (!Date.parse || doesNotParseY2KNewYear || acceptsInvalidDates || !supportsExtendedYears) {
    // XXX global assignment won&#x27;t work in embeddings that use
    // an alternate object for the context.
    /*global Date: true */
    /*eslint-disable no-undef*/
    Date = (function (NativeDate) {
    /*eslint-enable no-undef*/
        // Date.length === 7
        function Date(Y, M, D, h, m, s, ms) {
            var length = arguments.length;
            if (this instanceof NativeDate) {
                var date = length === 1 &amp;&amp; String(Y) === Y ? // isString(Y)
                    // We explicitly pass it through parse:
                    new NativeDate(Date.parse(Y)) :
                    // We have to manually make calls depending on argument
                    // length here
                    length &gt;= 7 ? new NativeDate(Y, M, D, h, m, s, ms) :
                    length &gt;= 6 ? new NativeDate(Y, M, D, h, m, s) :
                    length &gt;= 5 ? new NativeDate(Y, M, D, h, m) :
                    length &gt;= 4 ? new NativeDate(Y, M, D, h) :
                    length &gt;= 3 ? new NativeDate(Y, M, D) :
                    length &gt;= 2 ? new NativeDate(Y, M) :
                    length &gt;= 1 ? new NativeDate(Y) :
                                  new NativeDate();
                // Prevent mixups with unfixed Date object
                defineProperties(date, { constructor: Date }, true);
                return date;
            }
            return NativeDate.apply(this, arguments);
        }

        // 15.9.1.15 Date Time String Format.
        var isoDateExpression = new RegExp(&#x27;^&#x27; +
            &#x27;(\\d{4}|[+-]\\d{6})&#x27; + // four-digit year capture or sign +
                                      // 6-digit extended year
            &#x27;(?:-(\\d{2})&#x27; + // optional month capture
            &#x27;(?:-(\\d{2})&#x27; + // optional day capture
            &#x27;(?:&#x27; + // capture hours:minutes:seconds.milliseconds
                &#x27;T(\\d{2})&#x27; + // hours capture
                &#x27;:(\\d{2})&#x27; + // minutes capture
                &#x27;(?:&#x27; + // optional :seconds.milliseconds
                    &#x27;:(\\d{2})&#x27; + // seconds capture
                    &#x27;(?:(\\.\\d{1,}))?&#x27; + // milliseconds capture
                &#x27;)?&#x27; +
            &#x27;(&#x27; + // capture UTC offset component
                &#x27;Z|&#x27; + // UTC capture
                &#x27;(?:&#x27; + // offset specifier +/-hours:minutes
                    &#x27;([-+])&#x27; + // sign capture
                    &#x27;(\\d{2})&#x27; + // hours offset capture
                    &#x27;:(\\d{2})&#x27; + // minutes offset capture
                &#x27;)&#x27; +
            &#x27;)?)?)?)?&#x27; +
        &#x27;$&#x27;);

        var months = [
            0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365
        ];

        function dayFromMonth(year, month) {
            var t = month &gt; 1 ? 1 : 0;
            return (
                months[month] +
                Math.floor((year - 1969 + t) / 4) -
                Math.floor((year - 1901 + t) / 100) +
                Math.floor((year - 1601 + t) / 400) +
                365 * (year - 1970)
            );
        }

        function toUTC(t) {
            return Number(new NativeDate(1970, 0, 1, 0, 0, 0, t));
        }

        // Copy any custom methods a 3rd party library may have added
        for (var key in NativeDate) {
            Date[key] = NativeDate[key];
        }

        // Copy &quot;native&quot; methods explicitly; they may be non-enumerable
        Date.now = NativeDate.now;
        Date.UTC = NativeDate.UTC;
        Date.prototype = NativeDate.prototype;
        Date.prototype.constructor = Date;

        // Upgrade Date.parse to handle simplified ISO 8601 strings
        Date.parse = function parse(string) {
            var match = isoDateExpression.exec(string);
            if (match) {
                // parse months, days, hours, minutes, seconds, and milliseconds
                // provide default values if necessary
                // parse the UTC offset component
                var year = Number(match[1]),
                    month = Number(match[2] || 1) - 1,
                    day = Number(match[3] || 1) - 1,
                    hour = Number(match[4] || 0),
                    minute = Number(match[5] || 0),
                    second = Number(match[6] || 0),
                    millisecond = Math.floor(Number(match[7] || 0) * 1000),
                    // When time zone is missed, local offset should be used
                    // (ES 5.1 bug)
                    // see https://bugs.ecmascript.org/show_bug.cgi?id=112
                    isLocalTime = Boolean(match[4] &amp;&amp; !match[8]),
                    signOffset = match[9] === &#x27;-&#x27; ? 1 : -1,
                    hourOffset = Number(match[10] || 0),
                    minuteOffset = Number(match[11] || 0),
                    result;
                if (
                    hour &lt; (
                        minute &gt; 0 || second &gt; 0 || millisecond &gt; 0 ?
                        24 : 25
                    ) &amp;&amp;
                    minute &lt; 60 &amp;&amp; second &lt; 60 &amp;&amp; millisecond &lt; 1000 &amp;&amp;
                    month &gt; -1 &amp;&amp; month &lt; 12 &amp;&amp; hourOffset &lt; 24 &amp;&amp;
                    minuteOffset &lt; 60 &amp;&amp; // detect invalid offsets
                    day &gt; -1 &amp;&amp;
                    day &lt; (
                        dayFromMonth(year, month + 1) -
                        dayFromMonth(year, month)
                    )
                ) {
                    result = (
                        (dayFromMonth(year, month) + day) * 24 +
                        hour +
                        hourOffset * signOffset
                    ) * 60;
                    result = (
                        (result + minute + minuteOffset * signOffset) * 60 +
                        second
                    ) * 1000 + millisecond;
                    if (isLocalTime) {
                        result = toUTC(result);
                    }
                    if (-8.64e15 &lt;= result &amp;&amp; result &lt;= 8.64e15) {
                        return result;
                    }
                }
                return NaN;
            }
            return NativeDate.parse.apply(this, arguments);
        };

        return Date;
    }(Date));
    /*global Date: false */
}

// ES5 15.9.4.4
// http://es5.github.com/#x15.9.4.4
if (!Date.now) {
    Date.now = function now() {
        return new Date().getTime();
    };
}

//
// Number
// ======
//

// ES5.1 15.7.4.5
// http://es5.github.com/#x15.7.4.5
var hasToFixedBugs = NumberPrototype.toFixed &amp;&amp; (
  (0.00008).toFixed(3) !== &#x27;0.000&#x27; ||
  (0.9).toFixed(0) !== &#x27;1&#x27; ||
  (1.255).toFixed(2) !== &#x27;1.25&#x27; ||
  (1000000000000000128).toFixed(0) !== &#x27;1000000000000000128&#x27;
);

var toFixedHelpers = {
  base: 1e7,
  size: 6,
  data: [0, 0, 0, 0, 0, 0],
  multiply: function multiply(n, c) {
      var i = -1;
      var c2 = c;
      while (++i &lt; toFixedHelpers.size) {
          c2 += n * toFixedHelpers.data[i];
          toFixedHelpers.data[i] = c2 % toFixedHelpers.base;
          c2 = Math.floor(c2 / toFixedHelpers.base);
      }
  },
  divide: function divide(n) {
      var i = toFixedHelpers.size, c = 0;
      while (--i &gt;= 0) {
          c += toFixedHelpers.data[i];
          toFixedHelpers.data[i] = Math.floor(c / n);
          c = (c % n) * toFixedHelpers.base;
      }
  },
  numToString: function numToString() {
      var i = toFixedHelpers.size;
      var s = &#x27;&#x27;;
      while (--i &gt;= 0) {
          if (s !== &#x27;&#x27; || i === 0 || toFixedHelpers.data[i] !== 0) {
              var t = String(toFixedHelpers.data[i]);
              if (s === &#x27;&#x27;) {
                  s = t;
              } else {
                  s += &#x27;0000000&#x27;.slice(0, 7 - t.length) + t;
              }
          }
      }
      return s;
  },
  pow: function pow(x, n, acc) {
      return (n === 0 ? acc : (n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc)));
  },
  log: function log(x) {
      var n = 0;
      var x2 = x;
      while (x2 &gt;= 4096) {
          n += 12;
          x2 /= 4096;
      }
      while (x2 &gt;= 2) {
          n += 1;
          x2 /= 2;
      }
      return n;
  }
};

defineProperties(NumberPrototype, {
    toFixed: function toFixed(fractionDigits) {
        var f, x, s, m, e, z, j, k;

        // Test for NaN and round fractionDigits down
        f = Number(fractionDigits);
        f = f !== f ? 0 : Math.floor(f);

        if (f &lt; 0 || f &gt; 20) {
            throw new RangeError(&#x27;Number.toFixed called with invalid number of decimals&#x27;);
        }

        x = Number(this);

        // Test for NaN
        if (x !== x) {
            return &#x27;NaN&#x27;;
        }

        // If it is too big or small, return the string value of the number
        if (x &lt;= -1e21 || x &gt;= 1e21) {
            return String(x);
        }

        s = &#x27;&#x27;;

        if (x &lt; 0) {
            s = &#x27;-&#x27;;
            x = -x;
        }

        m = &#x27;0&#x27;;

        if (x &gt; 1e-21) {
            // 1e-21 &lt; x &lt; 1e21
            // -70 &lt; log2(x) &lt; 70
            e = toFixedHelpers.log(x * toFixedHelpers.pow(2, 69, 1)) - 69;
            z = (e &lt; 0 ? x * toFixedHelpers.pow(2, -e, 1) : x / toFixedHelpers.pow(2, e, 1));
            z *= 0x10000000000000; // Math.pow(2, 52);
            e = 52 - e;

            // -18 &lt; e &lt; 122
            // x = z / 2 ^ e
            if (e &gt; 0) {
                toFixedHelpers.multiply(0, z);
                j = f;

                while (j &gt;= 7) {
                    toFixedHelpers.multiply(1e7, 0);
                    j -= 7;
                }

                toFixedHelpers.multiply(toFixedHelpers.pow(10, j, 1), 0);
                j = e - 1;

                while (j &gt;= 23) {
                    toFixedHelpers.divide(1 &lt;&lt; 23);
                    j -= 23;
                }

                toFixedHelpers.divide(1 &lt;&lt; j);
                toFixedHelpers.multiply(1, 1);
                toFixedHelpers.divide(2);
                m = toFixedHelpers.numToString();
            } else {
                toFixedHelpers.multiply(0, z);
                toFixedHelpers.multiply(1 &lt;&lt; (-e), 0);
                m = toFixedHelpers.numToString() + &#x27;0.00000000000000000000&#x27;.slice(2, 2 + f);
            }
        }

        if (f &gt; 0) {
            k = m.length;

            if (k &lt;= f) {
                m = s + &#x27;0.0000000000000000000&#x27;.slice(0, f - k + 2) + m;
            } else {
                m = s + m.slice(0, k - f) + &#x27;.&#x27; + m.slice(k - f);
            }
        } else {
            m = s + m;
        }

        return m;
    }
}, hasToFixedBugs);

//
// String
// ======
//

// ES5 15.5.4.14
// http://es5.github.com/#x15.5.4.14

// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]
// Many browsers do not split properly with regular expressions or they
// do not perform the split correctly under obscure conditions.
// See http://blog.stevenlevithan.com/archives/cross-browser-split
// I&#x27;ve tested in many browsers and this seems to cover the deviant ones:
//    &#x27;ab&#x27;.split(/(?:ab)*/) should be [&quot;&quot;, &quot;&quot;], not [&quot;&quot;]
//    &#x27;.&#x27;.split(/(.?)(.?)/) should be [&quot;&quot;, &quot;.&quot;, &quot;&quot;, &quot;&quot;], not [&quot;&quot;, &quot;&quot;]
//    &#x27;tesst&#x27;.split(/(s)*/) should be [&quot;t&quot;, undefined, &quot;e&quot;, &quot;s&quot;, &quot;t&quot;], not
//       [undefined, &quot;t&quot;, undefined, &quot;e&quot;, ...]
//    &#x27;&#x27;.split(/.?/) should be [], not [&quot;&quot;]
//    &#x27;.&#x27;.split(/()()/) should be [&quot;.&quot;], not [&quot;&quot;, &quot;&quot;, &quot;.&quot;]

var string_split = StringPrototype.split;
if (
    &#x27;ab&#x27;.split(/(?:ab)*/).length !== 2 ||
    &#x27;.&#x27;.split(/(.?)(.?)/).length !== 4 ||
    &#x27;tesst&#x27;.split(/(s)*/)[1] === &#x27;t&#x27; ||
    &#x27;test&#x27;.split(/(?:)/, -1).length !== 4 ||
    &#x27;&#x27;.split(/.?/).length ||
    &#x27;.&#x27;.split(/()()/).length &gt; 1
) {
    (function () {
        var compliantExecNpcg = typeof (/()??/).exec(&#x27;&#x27;)[1] === &#x27;undefined&#x27;; // NPCG: nonparticipating capturing group

        StringPrototype.split = function (separator, limit) {
            var string = this;
            if (typeof separator === &#x27;undefined&#x27; &amp;&amp; limit === 0) {
                return [];
            }

            // If &#x60;separator&#x60; is not a regex, use native split
            if (!isRegex(separator)) {
                return string_split.call(this, separator, limit);
            }

            var output = [];
            var flags = (separator.ignoreCase ? &#x27;i&#x27; : &#x27;&#x27;) +
                        (separator.multiline ? &#x27;m&#x27; : &#x27;&#x27;) +
                        (separator.extended ? &#x27;x&#x27; : &#x27;&#x27;) + // Proposed for ES6
                        (separator.sticky ? &#x27;y&#x27; : &#x27;&#x27;), // Firefox 3+
                lastLastIndex = 0,
                // Make &#x60;global&#x60; and avoid &#x60;lastIndex&#x60; issues by working with a copy
                separator2, match, lastIndex, lastLength;
            var separatorCopy = new RegExp(separator.source, flags + &#x27;g&#x27;);
            string += &#x27;&#x27;; // Type-convert
            if (!compliantExecNpcg) {
                // Doesn&#x27;t need flags gy, but they don&#x27;t hurt
                separator2 = new RegExp(&#x27;^&#x27; + separatorCopy.source + &#x27;$(?!\\s)&#x27;, flags);
            }
            /* Values for &#x60;limit&#x60;, per the spec:
             * If undefined: 4294967295 // Math.pow(2, 32) - 1
             * If 0, Infinity, or NaN: 0
             * If positive number: limit = Math.floor(limit); if (limit &gt; 4294967295) limit -= 4294967296;
             * If negative number: 4294967296 - Math.floor(Math.abs(limit))
             * If other: Type-convert, then use the above rules
             */
            var splitLimit = typeof limit === &#x27;undefined&#x27; ?
                -1 &gt;&gt;&gt; 0 : // Math.pow(2, 32) - 1
                ES.ToUint32(limit);
            match = separatorCopy.exec(string);
            while (match) {
                // &#x60;separatorCopy.lastIndex&#x60; is not reliable cross-browser
                lastIndex = match.index + match[0].length;
                if (lastIndex &gt; lastLastIndex) {
                    output.push(string.slice(lastLastIndex, match.index));
                    // Fix browsers whose &#x60;exec&#x60; methods don&#x27;t consistently return &#x60;undefined&#x60; for
                    // nonparticipating capturing groups
                    if (!compliantExecNpcg &amp;&amp; match.length &gt; 1) {
                        /*eslint-disable no-loop-func */
                        match[0].replace(separator2, function () {
                            for (var i = 1; i &lt; arguments.length - 2; i++) {
                                if (typeof arguments[i] === &#x27;undefined&#x27;) {
                                    match[i] = void 0;
                                }
                            }
                        });
                        /*eslint-enable no-loop-func */
                    }
                    if (match.length &gt; 1 &amp;&amp; match.index &lt; string.length) {
                        array_push.apply(output, match.slice(1));
                    }
                    lastLength = match[0].length;
                    lastLastIndex = lastIndex;
                    if (output.length &gt;= splitLimit) {
                        break;
                    }
                }
                if (separatorCopy.lastIndex === match.index) {
                    separatorCopy.lastIndex++; // Avoid an infinite loop
                }
                match = separatorCopy.exec(string);
            }
            if (lastLastIndex === string.length) {
                if (lastLength || !separatorCopy.test(&#x27;&#x27;)) {
                    output.push(&#x27;&#x27;);
                }
            } else {
                output.push(string.slice(lastLastIndex));
            }
            return output.length &gt; splitLimit ? output.slice(0, splitLimit) : output;
        };
    }());

// [bugfix, chrome]
// If separator is undefined, then the result array contains just one String,
// which is the this value (converted to a String). If limit is not undefined,
// then the output array is truncated so that it contains no more than limit
// elements.
// &quot;0&quot;.split(undefined, 0) -&gt; []
} else if (&#x27;0&#x27;.split(void 0, 0).length) {
    StringPrototype.split = function split(separator, limit) {
        if (typeof separator === &#x27;undefined&#x27; &amp;&amp; limit === 0) { return []; }
        return string_split.call(this, separator, limit);
    };
}

var str_replace = StringPrototype.replace;
var replaceReportsGroupsCorrectly = (function () {
    var groups = [];
    &#x27;x&#x27;.replace(/x(.)?/g, function (match, group) {
        groups.push(group);
    });
    return groups.length === 1 &amp;&amp; typeof groups[0] === &#x27;undefined&#x27;;
}());

if (!replaceReportsGroupsCorrectly) {
    StringPrototype.replace = function replace(searchValue, replaceValue) {
        var isFn = isCallable(replaceValue);
        var hasCapturingGroups = isRegex(searchValue) &amp;&amp; (/\)[*?]/).test(searchValue.source);
        if (!isFn || !hasCapturingGroups) {
            return str_replace.call(this, searchValue, replaceValue);
        } else {
            var wrappedReplaceValue = function (match) {
                var length = arguments.length;
                var originalLastIndex = searchValue.lastIndex;
                searchValue.lastIndex = 0;
                var args = searchValue.exec(match) || [];
                searchValue.lastIndex = originalLastIndex;
                args.push(arguments[length - 2], arguments[length - 1]);
                return replaceValue.apply(this, args);
            };
            return str_replace.call(this, searchValue, wrappedReplaceValue);
        }
    };
}

// ECMA-262, 3rd B.2.3
// Not an ECMAScript standard, although ECMAScript 3rd Edition has a
// non-normative section suggesting uniform semantics and it should be
// normalized across all browsers
// [bugfix, IE lt 9] IE &lt; 9 substr() with negative value not working in IE
var string_substr = StringPrototype.substr;
var hasNegativeSubstrBug = &#x27;&#x27;.substr &amp;&amp; &#x27;0b&#x27;.substr(-1) !== &#x27;b&#x27;;
defineProperties(StringPrototype, {
    substr: function substr(start, length) {
        var normalizedStart = start;
        if (start &lt; 0) {
            normalizedStart = Math.max(this.length + start, 0);
        }
        return string_substr.call(this, normalizedStart, length);
    }
}, hasNegativeSubstrBug);

// ES5 15.5.4.20
// whitespace from: http://es5.github.io/#x15.5.4.20
var ws = &#x27;\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003&#x27; +
    &#x27;\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028&#x27; +
    &#x27;\u2029\uFEFF&#x27;;
var zeroWidth = &#x27;\u200b&#x27;;
var wsRegexChars = &#x27;[&#x27; + ws + &#x27;]&#x27;;
var trimBeginRegexp = new RegExp(&#x27;^&#x27; + wsRegexChars + wsRegexChars + &#x27;*&#x27;);
var trimEndRegexp = new RegExp(wsRegexChars + wsRegexChars + &#x27;*$&#x27;);
var hasTrimWhitespaceBug = StringPrototype.trim &amp;&amp; (ws.trim() || !zeroWidth.trim());
defineProperties(StringPrototype, {
    // http://blog.stevenlevithan.com/archives/faster-trim-javascript
    // http://perfectionkills.com/whitespace-deviations/
    trim: function trim() {
        if (typeof this === &#x27;undefined&#x27; || this === null) {
            throw new TypeError(&quot;can&#x27;t convert &quot; + this + &#x27; to object&#x27;);
        }
        return String(this).replace(trimBeginRegexp, &#x27;&#x27;).replace(trimEndRegexp, &#x27;&#x27;);
    }
}, hasTrimWhitespaceBug);

// ES-5 15.1.2.2
if (parseInt(ws + &#x27;08&#x27;) !== 8 || parseInt(ws + &#x27;0x16&#x27;) !== 22) {
    /*global parseInt: true */
    parseInt = (function (origParseInt) {
        var hexRegex = /^0[xX]/;
        return function parseInt(str, radix) {
            var string = String(str).trim();
            var defaultedRadix = Number(radix) || (hexRegex.test(string) ? 16 : 10);
            return origParseInt(string, defaultedRadix);
        };
    }(parseInt));
}

}));

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
