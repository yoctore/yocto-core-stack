<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>bower_components/angular-local-storage/dist/angular-local-storage.js - yocto-core-stack</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="yocto-core-stack" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Gruntfile.html">Gruntfile</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/copy.html">copy</a></li>
                                <li><a href="../modules/Grunt file.html">Grunt file</a></li>
                                <li><a href="../modules/jshint.html">jshint</a></li>
                                <li><a href="../modules/ng.html">ng</a></li>
                                <li><a href="../modules/ngMessages.html">ngMessages</a></li>
                                <li><a href="../modules/ngMock.html">ngMock</a></li>
                                <li><a href="../modules/ngMockE2E.html">ngMockE2E</a></li>
                                <li><a href="../modules/uglify.html">uglify</a></li>
                                <li><a href="../modules/yuidoc.html">yuidoc</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: bower_components/angular-local-storage/dist/angular-local-storage.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * An Angular module that gives you access to the browsers local storage
 * @version v0.1.5 - 2014-11-04
 * @link https://github.com/grevory/angular-local-storage
 * @author grevory &lt;greg@gregpike.ca&gt;
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function ( window, angular, undefined ) {
/*jshint globalstrict:true*/
&#x27;use strict&#x27;;

var isDefined = angular.isDefined,
  isUndefined = angular.isUndefined,
  isNumber = angular.isNumber,
  isObject = angular.isObject,
  isArray = angular.isArray,
  extend = angular.extend,
  toJson = angular.toJson,
  fromJson = angular.fromJson;


// Test if string is only contains numbers
// e.g &#x27;1&#x27; =&gt; true, &quot;&#x27;1&#x27;&quot; =&gt; true
function isStringNumber(num) {
  return  /^-?\d+\.?\d*$/.test(num.replace(/[&quot;&#x27;]/g, &#x27;&#x27;));
}

var angularLocalStorage = angular.module(&#x27;LocalStorageModule&#x27;, []);

angularLocalStorage.provider(&#x27;localStorageService&#x27;, function() {

  // You should set a prefix to avoid overwriting any local storage variables from the rest of your app
  // e.g. localStorageServiceProvider.setPrefix(&#x27;youAppName&#x27;);
  // With provider you can use config as this:
  // myApp.config(function (localStorageServiceProvider) {
  //    localStorageServiceProvider.prefix = &#x27;yourAppName&#x27;;
  // });
  this.prefix = &#x27;ls&#x27;;

  // You could change web storage type localstorage or sessionStorage
  this.storageType = &#x27;localStorage&#x27;;

  // Cookie options (usually in case of fallback)
  // expiry = Number of days before cookies expire // 0 = Does not expire
  // path = The web path the cookie represents
  this.cookie = {
    expiry: 30,
    path: &#x27;/&#x27;
  };

  // Send signals for each of the following actions?
  this.notify = {
    setItem: true,
    removeItem: false
  };

  // Setter for the prefix
  this.setPrefix = function(prefix) {
    this.prefix = prefix;
    return this;
  };

   // Setter for the storageType
   this.setStorageType = function(storageType) {
     this.storageType = storageType;
     return this;
   };

  // Setter for cookie config
  this.setStorageCookie = function(exp, path) {
    this.cookie = {
      expiry: exp,
      path: path
    };
    return this;
  };

  // Setter for cookie domain
  this.setStorageCookieDomain = function(domain) {
    this.cookie.domain = domain;
    return this;
  };

  // Setter for notification config
  // itemSet &amp; itemRemove should be booleans
  this.setNotify = function(itemSet, itemRemove) {
    this.notify = {
      setItem: itemSet,
      removeItem: itemRemove
    };
    return this;
  };

  this.$get = [&#x27;$rootScope&#x27;, &#x27;$window&#x27;, &#x27;$document&#x27;, &#x27;$parse&#x27;, function($rootScope, $window, $document, $parse) {
    var self = this;
    var prefix = self.prefix;
    var cookie = self.cookie;
    var notify = self.notify;
    var storageType = self.storageType;
    var webStorage;

    // When Angular&#x27;s $document is not available
    if (!$document) {
      $document = document;
    } else if ($document[0]) {
      $document = $document[0];
    }

    // If there is a prefix set in the config lets use that with an appended period for readability
    if (prefix.substr(-1) !== &#x27;.&#x27;) {
      prefix = !!prefix ? prefix + &#x27;.&#x27; : &#x27;&#x27;;
    }
    var deriveQualifiedKey = function(key) {
      return prefix + key;
    };
    // Checks the browser to see if local storage is supported
    var browserSupportsLocalStorage = (function () {
      try {
        var supported = (storageType in $window &amp;&amp; $window[storageType] !== null);

        // When Safari (OS X or iOS) is in private browsing mode, it appears as though localStorage
        // is available, but trying to call .setItem throws an exception.
        //
        // &quot;QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made to add something to storage
        // that exceeded the quota.&quot;
        var key = deriveQualifiedKey(&#x27;__&#x27; + Math.round(Math.random() * 1e7));
        if (supported) {
          webStorage = $window[storageType];
          webStorage.setItem(key, &#x27;&#x27;);
          webStorage.removeItem(key);
        }

        return supported;
      } catch (e) {
        storageType = &#x27;cookie&#x27;;
        $rootScope.$broadcast(&#x27;LocalStorageModule.notification.error&#x27;, e.message);
        return false;
      }
    }());



    // Directly adds a value to local storage
    // If local storage is not available in the browser use cookies
    // Example use: localStorageService.add(&#x27;library&#x27;,&#x27;angular&#x27;);
    var addToLocalStorage = function (key, value) {
      // Let&#x27;s convert undefined values to null to get the value consistent
      if (isUndefined(value)) {
        value = null;
      } else if (isObject(value) || isArray(value) || isNumber(+value || value)) {
        value = toJson(value);
      }

      // If this browser does not support local storage use cookies
      if (!browserSupportsLocalStorage || self.storageType === &#x27;cookie&#x27;) {
        if (!browserSupportsLocalStorage) {
            $rootScope.$broadcast(&#x27;LocalStorageModule.notification.warning&#x27;, &#x27;LOCAL_STORAGE_NOT_SUPPORTED&#x27;);
        }

        if (notify.setItem) {
          $rootScope.$broadcast(&#x27;LocalStorageModule.notification.setitem&#x27;, {key: key, newvalue: value, storageType: &#x27;cookie&#x27;});
        }
        return addToCookies(key, value);
      }

      try {
        if (isObject(value) || isArray(value)) {
          value = toJson(value);
        }
        if (webStorage) {webStorage.setItem(deriveQualifiedKey(key), value)};
        if (notify.setItem) {
          $rootScope.$broadcast(&#x27;LocalStorageModule.notification.setitem&#x27;, {key: key, newvalue: value, storageType: self.storageType});
        }
      } catch (e) {
        $rootScope.$broadcast(&#x27;LocalStorageModule.notification.error&#x27;, e.message);
        return addToCookies(key, value);
      }
      return true;
    };

    // Directly get a value from local storage
    // Example use: localStorageService.get(&#x27;library&#x27;); // returns &#x27;angular&#x27;
    var getFromLocalStorage = function (key) {

      if (!browserSupportsLocalStorage || self.storageType === &#x27;cookie&#x27;) {
        if (!browserSupportsLocalStorage) {
          $rootScope.$broadcast(&#x27;LocalStorageModule.notification.warning&#x27;,&#x27;LOCAL_STORAGE_NOT_SUPPORTED&#x27;);
        }

        return getFromCookies(key);
      }

      var item = webStorage ? webStorage.getItem(deriveQualifiedKey(key)) : null;
      // angular.toJson will convert null to &#x27;null&#x27;, so a proper conversion is needed
      // FIXME not a perfect solution, since a valid &#x27;null&#x27; string can&#x27;t be stored
      if (!item || item === &#x27;null&#x27;) {
        return null;
      }

      if (item.charAt(0) === &quot;{&quot; || item.charAt(0) === &quot;[&quot; || isStringNumber(item)) {
        return fromJson(item);
      }

      return item;
    };

    // Remove an item from local storage
    // Example use: localStorageService.remove(&#x27;library&#x27;); // removes the key/value pair of library=&#x27;angular&#x27;
    var removeFromLocalStorage = function (key) {
      if (!browserSupportsLocalStorage || self.storageType === &#x27;cookie&#x27;) {
        if (!browserSupportsLocalStorage) {
          $rootScope.$broadcast(&#x27;LocalStorageModule.notification.warning&#x27;, &#x27;LOCAL_STORAGE_NOT_SUPPORTED&#x27;);
        }

        if (notify.removeItem) {
          $rootScope.$broadcast(&#x27;LocalStorageModule.notification.removeitem&#x27;, {key: key, storageType: &#x27;cookie&#x27;});
        }
        return removeFromCookies(key);
      }

      try {
        webStorage.removeItem(deriveQualifiedKey(key));
        if (notify.removeItem) {
          $rootScope.$broadcast(&#x27;LocalStorageModule.notification.removeitem&#x27;, {key: key, storageType: self.storageType});
        }
      } catch (e) {
        $rootScope.$broadcast(&#x27;LocalStorageModule.notification.error&#x27;, e.message);
        return removeFromCookies(key);
      }
      return true;
    };

    // Return array of keys for local storage
    // Example use: var keys = localStorageService.keys()
    var getKeysForLocalStorage = function () {

      if (!browserSupportsLocalStorage) {
        $rootScope.$broadcast(&#x27;LocalStorageModule.notification.warning&#x27;, &#x27;LOCAL_STORAGE_NOT_SUPPORTED&#x27;);
        return false;
      }

      var prefixLength = prefix.length;
      var keys = [];
      for (var key in webStorage) {
        // Only return keys that are for this app
        if (key.substr(0,prefixLength) === prefix) {
          try {
            keys.push(key.substr(prefixLength));
          } catch (e) {
            $rootScope.$broadcast(&#x27;LocalStorageModule.notification.error&#x27;, e.Description);
            return [];
          }
        }
      }
      return keys;
    };

    // Remove all data for this app from local storage
    // Also optionally takes a regular expression string and removes the matching key-value pairs
    // Example use: localStorageService.clearAll();
    // Should be used mostly for development purposes
    var clearAllFromLocalStorage = function (regularExpression) {

      regularExpression = regularExpression || &quot;&quot;;
      //accounting for the &#x27;.&#x27; in the prefix when creating a regex
      var tempPrefix = prefix.slice(0, -1);
      var testRegex = new RegExp(tempPrefix + &#x27;.&#x27; + regularExpression);

      if (!browserSupportsLocalStorage || self.storageType === &#x27;cookie&#x27;) {
        if (!browserSupportsLocalStorage) {
          $rootScope.$broadcast(&#x27;LocalStorageModule.notification.warning&#x27;, &#x27;LOCAL_STORAGE_NOT_SUPPORTED&#x27;);
        }

        return clearAllFromCookies();
      }

      var prefixLength = prefix.length;

      for (var key in webStorage) {
        // Only remove items that are for this app and match the regular expression
        if (testRegex.test(key)) {
          try {
            removeFromLocalStorage(key.substr(prefixLength));
          } catch (e) {
            $rootScope.$broadcast(&#x27;LocalStorageModule.notification.error&#x27;,e.message);
            return clearAllFromCookies();
          }
        }
      }
      return true;
    };

    // Checks the browser to see if cookies are supported
    var browserSupportsCookies = (function() {
      try {
        return $window.navigator.cookieEnabled ||
          (&quot;cookie&quot; in $document &amp;&amp; ($document.cookie.length &gt; 0 ||
          ($document.cookie = &quot;test&quot;).indexOf.call($document.cookie, &quot;test&quot;) &gt; -1));
      } catch (e) {
          $rootScope.$broadcast(&#x27;LocalStorageModule.notification.error&#x27;, e.message);
          return false;
      }
    }());

    // Directly adds a value to cookies
    // Typically used as a fallback is local storage is not available in the browser
    // Example use: localStorageService.cookie.add(&#x27;library&#x27;,&#x27;angular&#x27;);
    var addToCookies = function (key, value) {

      if (isUndefined(value)) {
        return false;
      } else if(isArray(value) || isObject(value)) {
        value = toJson(value);
      }

      if (!browserSupportsCookies) {
        $rootScope.$broadcast(&#x27;LocalStorageModule.notification.error&#x27;, &#x27;COOKIES_NOT_SUPPORTED&#x27;);
        return false;
      }

      try {
        var expiry = &#x27;&#x27;,
            expiryDate = new Date(),
            cookieDomain = &#x27;&#x27;;

        if (value === null) {
          // Mark that the cookie has expired one day ago
          expiryDate.setTime(expiryDate.getTime() + (-1 * 24 * 60 * 60 * 1000));
          expiry = &quot;; expires=&quot; + expiryDate.toGMTString();
          value = &#x27;&#x27;;
        } else if (cookie.expiry !== 0) {
          expiryDate.setTime(expiryDate.getTime() + (cookie.expiry * 24 * 60 * 60 * 1000));
          expiry = &quot;; expires=&quot; + expiryDate.toGMTString();
        }
        if (!!key) {
          var cookiePath = &quot;; path=&quot; + cookie.path;
          if(cookie.domain){
            cookieDomain = &quot;; domain=&quot; + cookie.domain;
          }
          $document.cookie = deriveQualifiedKey(key) + &quot;=&quot; + encodeURIComponent(value) + expiry + cookiePath + cookieDomain;
        }
      } catch (e) {
        $rootScope.$broadcast(&#x27;LocalStorageModule.notification.error&#x27;,e.message);
        return false;
      }
      return true;
    };

    // Directly get a value from a cookie
    // Example use: localStorageService.cookie.get(&#x27;library&#x27;); // returns &#x27;angular&#x27;
    var getFromCookies = function (key) {
      if (!browserSupportsCookies) {
        $rootScope.$broadcast(&#x27;LocalStorageModule.notification.error&#x27;, &#x27;COOKIES_NOT_SUPPORTED&#x27;);
        return false;
      }

      var cookies = $document.cookie &amp;&amp; $document.cookie.split(&#x27;;&#x27;) || [];
      for(var i=0; i &lt; cookies.length; i++) {
        var thisCookie = cookies[i];
        while (thisCookie.charAt(0) === &#x27; &#x27;) {
          thisCookie = thisCookie.substring(1,thisCookie.length);
        }
        if (thisCookie.indexOf(deriveQualifiedKey(key) + &#x27;=&#x27;) === 0) {
          var storedValues = decodeURIComponent(thisCookie.substring(prefix.length + key.length + 1, thisCookie.length))
          try{
            var obj = JSON.parse(storedValues);
            return fromJson(obj)
          }catch(e){
            return storedValues
          }
        }
      }
      return null;
    };

    var removeFromCookies = function (key) {
      addToCookies(key,null);
    };

    var clearAllFromCookies = function () {
      var thisCookie = null, thisKey = null;
      var prefixLength = prefix.length;
      var cookies = $document.cookie.split(&#x27;;&#x27;);
      for(var i = 0; i &lt; cookies.length; i++) {
        thisCookie = cookies[i];

        while (thisCookie.charAt(0) === &#x27; &#x27;) {
          thisCookie = thisCookie.substring(1, thisCookie.length);
        }

        var key = thisCookie.substring(prefixLength, thisCookie.indexOf(&#x27;=&#x27;));
        removeFromCookies(key);
      }
    };

    var getStorageType = function() {
      return storageType;
    };

    // Add a listener on scope variable to save its changes to local storage
    // Return a function which when called cancels binding
    var bindToScope = function(scope, key, def, lsKey) {
      lsKey = lsKey || key;
      var value = getFromLocalStorage(lsKey);

      if (value === null &amp;&amp; isDefined(def)) {
        value = def;
      } else if (isObject(value) &amp;&amp; isObject(def)) {
        value = extend(def, value);
      }

      $parse(key).assign(scope, value);

      return scope.$watch(key, function(newVal) {
        addToLocalStorage(lsKey, newVal);
      }, isObject(scope[key]));
    };

    // Return localStorageService.length
    // ignore keys that not owned
    var lengthOfLocalStorage = function() {
      var count = 0;
      var storage = $window[storageType];
      for(var i = 0; i &lt; storage.length; i++) {
        if(storage.key(i).indexOf(prefix) === 0 ) {
          count++;
        }
      }
      return count;
    };

    return {
      isSupported: browserSupportsLocalStorage,
      getStorageType: getStorageType,
      set: addToLocalStorage,
      add: addToLocalStorage, //DEPRECATED
      get: getFromLocalStorage,
      keys: getKeysForLocalStorage,
      remove: removeFromLocalStorage,
      clearAll: clearAllFromLocalStorage,
      bind: bindToScope,
      deriveKey: deriveQualifiedKey,
      length: lengthOfLocalStorage,
      cookie: {
        isSupported: browserSupportsCookies,
        set: addToCookies,
        add: addToCookies, //DEPRECATED
        get: getFromCookies,
        remove: removeFromCookies,
        clearAll: clearAllFromCookies
      }
    };
  }];
});
})( window, window.angular );
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
